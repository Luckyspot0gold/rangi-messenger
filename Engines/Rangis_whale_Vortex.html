<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rangiâ€™s Heartbeat â€” 6D Vortex Ring Detector (Whale Smoke Rings)</title>
  <script src="https://ganja.js.org/ganja.js"></script>
  <style>
    body { margin:0; background:#000; overflow:hidden; color:#0ff; font-family:monospace; }
    #hud {
      position:absolute; top:20px; left:20px; padding:15px; background:rgba(0,10,30,0.8);
      border:2px solid #f0f; border-radius:12px; max-width:500px; pointer-events:none;
      text-shadow:0 0 10px #f0f;
    }
    #hud h1 { margin:0; font-size:1.6em; }
    #alert { color:#f00; font-weight:bold; }
  </style>
</head>
<body>

<div id="hud">
  <h1>Rangiâ€™s Heartbeat â€” 6D Whale Vortex Detector</h1>
  Red rings = hidden order clusters forming<br>
  When rings lock into a smoke ring â†’ <span id="alert">WHALE DETECTED</span><br>
  Drag Â· Scroll Â· Watch the dark pool smoke rise
</div>

<script>
// 6D+2 Conformal Geometric Algebra â€” weâ€™re in the deep end now
Algebra(6,2,()=>{

  var ni = 1e4, no = 0.5e-4;
  var up = (p)=>no + p.ni;

  // Background hypersphere
  var hypersphere = ()=>ni-no;

  // Fake orderbook depth feed (replace with real on-chain later)
  var t = 0;
  var hiddenPressure = 0;
  function darkPoolTick() {
    t += 0.01;
    // Simulate hidden buy/sell walls clustering
    hiddenPressure = Math.sin(t*1.3)*Math.cos(t*0.7)*0.4;
    return hiddenPressure;
  }

  // Vortex ring generator â€” type-II superfluid style
  var rings = [];
  function spawnRing() {
    var center = up(Math.random()*2*e1 + Math.random()*2*e2 + Math.random()*2*e3);
    var plane = e13 + Math.random()*0.5*(e14+e23+e56);
    rings.push({center, plane, radius:0.1 + Math.abs(hiddenPressure)*0.3, age:0});
  }

  function animate() {
    darkPoolTick();

    // Spawn new rings when hidden pressure spikes
    if (Math.abs(hiddenPressure) > 0.25 && Math.random() < 0.3) spawnRing();

    // Age and grow rings
    rings = rings.filter(r=>r.age++ < 200);
    rings.forEach(r=>r.radius += 0.005);

    // Detect smoke-ring lock (torus knot formation)
    var whaleAlert = rings.length > 4 && rings.some(a=>rings.some(b=>
      Math.abs((a.center^b.center).Length - a.radius - b.radius) < 0.05
    ));

    document.getElementById('alert').innerText = whaleAlert ? 
      "ðŸš¨ WHALE SMOKE RING FORMING â€” NUCLEAR MOVE INCOMING" : "watching the dark pool...";

    // Render
    document.body.innerHTML = `
      <algebra animate="1" scale="2">
        ${[0x001122, hypersphere()],                                   // hypersphere background
         ...rings.map(r=>[0xff0044, r.center ^ r.plane, r.radius]),    // red vortex rings
         [0x00ffff, "Hidden Order Pressure: "+hiddenPressure.toFixed(3)]}
      </algebra>`;
    requestAnimationFrame(animate);
  }
  animate();
});
</script>
</body>
</html>
